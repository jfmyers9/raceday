{"id":"tmux-raceday-d5l","title":"Docker Dev Container for Claude Code","description":"Set up a Docker-based development container that runs claude-code\nwith the project directory mounted, matching host UID/GID for\nsafe file operations.\n\n## Success Criteria\n- Dockerfile builds a working container with claude-code installed\n  via native installer on debian:bookworm-slim\n- Project directory bind-mounted with correct ownership (no root files)\n- API key passed securely at runtime via env var\n- Config (~/.claude) persists across container restarts via named volume\n- docker-compose.yml provides one-command startup","status":"in_progress","priority":1,"issue_type":"epic","owner":"jim.myers@jfmyers.dev","created_at":"2026-02-15T19:14:15Z","created_by":"Jim Myers","updated_at":"2026-02-15T19:14:56Z"}
{"id":"tmux-raceday-d5l.1","title":"Phase 1: Minimal Working Container","description":"## Acceptance Criteria\n- [ ] Dockerfile uses debian:bookworm-slim base\n- [ ] Claude-code installed via native installer\n- [ ] git, ripgrep, zsh, curl, jq installed\n- [ ] Non-root user created with configurable UID/GID build args\n- [ ] Container starts and runs claude successfully with\n      ANTHROPIC_API_KEY env var and bind-mounted workspace","status":"closed","priority":2,"issue_type":"task","assignee":"Jim Myers","owner":"jim.myers@jfmyers.dev","created_at":"2026-02-15T19:14:26Z","created_by":"Jim Myers","updated_at":"2026-02-15T19:16:05Z","closed_at":"2026-02-15T19:16:05Z","close_reason":"Closed","dependencies":[{"issue_id":"tmux-raceday-d5l.1","depends_on_id":"tmux-raceday-d5l","type":"parent-child","created_at":"2026-02-15T11:14:25Z","created_by":"Jim Myers","metadata":"{}"}]}
{"id":"tmux-raceday-d5l.2","title":"Phase 2: Persistence and Config","description":"## Acceptance Criteria\n- [ ] Named volume for ~/.claude persists auth/config across restarts\n- [ ] Shell history persists across restarts\n- [ ] Project directory bind-mounted with delegated consistency\n- [ ] .gitconfig mounted read-only for git identity\n- [ ] Stop/start container preserves auth state and file ownership","status":"closed","priority":2,"issue_type":"task","assignee":"Jim Myers","owner":"jim.myers@jfmyers.dev","created_at":"2026-02-15T19:14:28Z","created_by":"Jim Myers","updated_at":"2026-02-15T19:16:28Z","closed_at":"2026-02-15T19:16:28Z","close_reason":"Closed","dependencies":[{"issue_id":"tmux-raceday-d5l.2","depends_on_id":"tmux-raceday-d5l","type":"parent-child","created_at":"2026-02-15T11:14:27Z","created_by":"Jim Myers","metadata":"{}"},{"issue_id":"tmux-raceday-d5l.2","depends_on_id":"tmux-raceday-d5l.1","type":"blocks","created_at":"2026-02-15T11:14:38Z","created_by":"Jim Myers","metadata":"{}"}]}
{"id":"tmux-raceday-d5l.3","title":"Phase 3: Security Hardening","description":"## Acceptance Criteria\n- [ ] init-firewall.sh ported with claude.ai added to allowlist\n- [ ] Container runs with NET_ADMIN/NET_RAW capabilities\n- [ ] iptables, ipset, iproute2, dnsutils installed\n- [ ] Egress to example.com blocked, api.anthropic.com allowed\n- [ ] Headless mode (--dangerously-skip-permissions) works safely","status":"closed","priority":2,"issue_type":"task","assignee":"Jim Myers","owner":"jim.myers@jfmyers.dev","created_at":"2026-02-15T19:14:30Z","created_by":"Jim Myers","updated_at":"2026-02-15T19:18:06Z","closed_at":"2026-02-15T19:18:06Z","close_reason":"Closed","dependencies":[{"issue_id":"tmux-raceday-d5l.3","depends_on_id":"tmux-raceday-d5l","type":"parent-child","created_at":"2026-02-15T11:14:30Z","created_by":"Jim Myers","metadata":"{}"},{"issue_id":"tmux-raceday-d5l.3","depends_on_id":"tmux-raceday-d5l.2","type":"blocks","created_at":"2026-02-15T11:14:39Z","created_by":"Jim Myers","metadata":"{}"}]}
{"id":"tmux-raceday-d5l.4","title":"Phase 4: Git Integration","description":"## Acceptance Criteria\n- [ ] Credential strategy chosen and implemented (token or SSH agent)\n- [ ] gh CLI authenticated inside container\n- [ ] Clone, commit, push operations work from container\n- [ ] Files created in container have correct host ownership","status":"open","priority":2,"issue_type":"task","owner":"jim.myers@jfmyers.dev","created_at":"2026-02-15T19:14:32Z","created_by":"Jim Myers","updated_at":"2026-02-15T19:14:32Z","dependencies":[{"issue_id":"tmux-raceday-d5l.4","depends_on_id":"tmux-raceday-d5l","type":"parent-child","created_at":"2026-02-15T11:14:31Z","created_by":"Jim Myers","metadata":"{}"},{"issue_id":"tmux-raceday-d5l.4","depends_on_id":"tmux-raceday-d5l.3","type":"blocks","created_at":"2026-02-15T11:14:39Z","created_by":"Jim Myers","metadata":"{}"}]}
{"id":"tmux-raceday-d5l.5","title":"Phase 5: Developer Experience","description":"## Acceptance Criteria\n- [ ] docker-compose.yml provides one-command startup with all\n      mounts, env vars, and volumes configured\n- [ ] Project-specific tooling installed (language runtimes, etc.)\n- [ ] Optional devcontainer.json for VS Code integration","status":"open","priority":2,"issue_type":"task","owner":"jim.myers@jfmyers.dev","created_at":"2026-02-15T19:14:33Z","created_by":"Jim Myers","updated_at":"2026-02-15T19:14:33Z","dependencies":[{"issue_id":"tmux-raceday-d5l.5","depends_on_id":"tmux-raceday-d5l","type":"parent-child","created_at":"2026-02-15T11:14:33Z","created_by":"Jim Myers","metadata":"{}"},{"issue_id":"tmux-raceday-d5l.5","depends_on_id":"tmux-raceday-d5l.4","type":"blocks","created_at":"2026-02-15T11:14:39Z","created_by":"Jim Myers","metadata":"{}"}]}
{"id":"tmux-raceday-di0","title":"NASCAR Racing TUI / tmux Integration","description":"Go-based TUI and tmux status bar integration for live NASCAR race\ndata. Uses free cf.nascar.com CDN feeds for schedule, live timing,\npit data, and standings. Dual-mode: status bar segment via\n`#(raceday --status)` and full interactive TUI via\n`display-popup`. Built with Bubbletea + Lip Gloss.\n\n## Success Criteria\n- `raceday --status` shows next Cup Series race or live race state in tmux status bar\n- Full TUI leaderboard renders live race positions with auto-refresh\n- Favorite driver is always highlighted/visible in both modes\n- Single Go binary with no external dependencies beyond stdlib + bubbletea\n- Polling is respectful: adaptive intervals based on session state","status":"in_progress","priority":1,"issue_type":"epic","owner":"jim.myers@jfmyers.dev","created_at":"2026-02-15T19:14:12Z","created_by":"Jim Myers","updated_at":"2026-02-15T19:15:07Z"}
{"id":"tmux-raceday-di0.1","title":"Phase 1: Data Layer + Status Bar MVP","description":"## Acceptance Criteria\n- [ ] Go module initialized with cmd/raceday/, internal/nascar/, internal/tmux/ structure\n- [ ] NASCAR API client fetches race_list_basic.json and parses Cup Series schedule\n- [ ] `raceday --status` outputs one-line string: next race name, date, time\n- [ ] File-based caching prevents redundant API calls (1hr TTL for schedule)\n- [ ] Works as tmux status-right segment: `#(raceday --status)`\n- [ ] `--driver` flag accepts favorite driver car number","status":"closed","priority":2,"issue_type":"task","assignee":"Jim Myers","owner":"jim.myers@jfmyers.dev","created_at":"2026-02-15T19:14:37Z","created_by":"Jim Myers","updated_at":"2026-02-15T19:18:03Z","closed_at":"2026-02-15T19:18:03Z","close_reason":"Closed","dependencies":[{"issue_id":"tmux-raceday-di0.1","depends_on_id":"tmux-raceday-di0","type":"parent-child","created_at":"2026-02-15T11:14:36Z","created_by":"Jim Myers","metadata":"{}"}]}
{"id":"tmux-raceday-di0.2","title":"Phase 2: Live Race Detection + Status Bar","description":"## Acceptance Criteria\n- [ ] Polls live-feed.json and detects active Cup Series race (run_type==3, series_id==1)\n- [ ] Status bar switches to live mode: lap count, leader, favorite driver position\n- [ ] Smart polling intervals: 10s during race, 5min practice/qualifying, 1hr idle\n- [ ] Flag state displayed as colored symbols (green/yellow/red/white/checkered)\n- [ ] Graceful handling of edge cases: rain delay, not started, completed","status":"open","priority":2,"issue_type":"task","owner":"jim.myers@jfmyers.dev","created_at":"2026-02-15T19:14:37Z","created_by":"Jim Myers","updated_at":"2026-02-15T19:14:37Z","dependencies":[{"issue_id":"tmux-raceday-di0.2","depends_on_id":"tmux-raceday-di0","type":"parent-child","created_at":"2026-02-15T11:14:37Z","created_by":"Jim Myers","metadata":"{}"},{"issue_id":"tmux-raceday-di0.2","depends_on_id":"tmux-raceday-di0.1","type":"blocks","created_at":"2026-02-15T11:14:52Z","created_by":"Jim Myers","metadata":"{}"}]}
{"id":"tmux-raceday-di0.3","title":"Phase 3: Full TUI Leaderboard","description":"## Acceptance Criteria\n- [ ] Bubbletea app with model/update/view architecture\n- [ ] Full leaderboard table: position, car#, driver, delta, laps led, speed, status\n- [ ] Favorite driver row highlighted with distinct color\n- [ ] Keyboard controls: q=quit, j/k=scroll, /=search driver, tab=toggle sort\n- [ ] Auto-refresh via tick command (5s during live race)\n- [ ] Launchable via tmux: `bind r display-popup -E -w 80% -h 80% \"raceday\"`","status":"open","priority":2,"issue_type":"task","owner":"jim.myers@jfmyers.dev","created_at":"2026-02-15T19:14:37Z","created_by":"Jim Myers","updated_at":"2026-02-15T19:14:37Z","dependencies":[{"issue_id":"tmux-raceday-di0.3","depends_on_id":"tmux-raceday-di0","type":"parent-child","created_at":"2026-02-15T11:14:37Z","created_by":"Jim Myers","metadata":"{}"},{"issue_id":"tmux-raceday-di0.3","depends_on_id":"tmux-raceday-di0.2","type":"blocks","created_at":"2026-02-15T11:14:52Z","created_by":"Jim Myers","metadata":"{}"}]}
{"id":"tmux-raceday-di0.4","title":"Phase 4: Race Weekend Context","description":"## Acceptance Criteria\n- [ ] Weekend feed integration showing full race weekend schedule\n- [ ] Schedule view with countdown timers to each session\n- [ ] Entry list view: drivers, car numbers, teams, manufacturers\n- [ ] Qualifying results and starting grid display\n- [ ] Practice session leaderboard support (reuses race leaderboard with run_type awareness)\n- [ ] View switching: 1=leaderboard, 2=schedule, 3=entry list, 4=standings","status":"open","priority":2,"issue_type":"task","owner":"jim.myers@jfmyers.dev","created_at":"2026-02-15T19:14:38Z","created_by":"Jim Myers","updated_at":"2026-02-15T19:14:38Z","dependencies":[{"issue_id":"tmux-raceday-di0.4","depends_on_id":"tmux-raceday-di0","type":"parent-child","created_at":"2026-02-15T11:14:37Z","created_by":"Jim Myers","metadata":"{}"},{"issue_id":"tmux-raceday-di0.4","depends_on_id":"tmux-raceday-di0.3","type":"blocks","created_at":"2026-02-15T11:14:53Z","created_by":"Jim Myers","metadata":"{}"}]}
{"id":"tmux-raceday-di0.5","title":"Phase 5: Pit Stops + Stage Tracking","description":"## Acceptance Criteria\n- [ ] Pit data integration: tire choice, pit time, laps since last pit per driver\n- [ ] Pit stop column in leaderboard (stop count, laps on tires)\n- [ ] Stage results overlay when stages complete (winner, stage points)\n- [ ] Caution tracking: count, reason from lap notes, laps under caution\n- [ ] Movers/shakers display using passing_differential field","status":"open","priority":2,"issue_type":"task","owner":"jim.myers@jfmyers.dev","created_at":"2026-02-15T19:14:38Z","created_by":"Jim Myers","updated_at":"2026-02-15T19:14:38Z","dependencies":[{"issue_id":"tmux-raceday-di0.5","depends_on_id":"tmux-raceday-di0","type":"parent-child","created_at":"2026-02-15T11:14:38Z","created_by":"Jim Myers","metadata":"{}"},{"issue_id":"tmux-raceday-di0.5","depends_on_id":"tmux-raceday-di0.3","type":"blocks","created_at":"2026-02-15T11:14:53Z","created_by":"Jim Myers","metadata":"{}"}]}
{"id":"tmux-raceday-di0.6","title":"Phase 6: Notifications + Configuration","description":"## Acceptance Criteria\n- [ ] YAML config file at ~/.config/raceday/config.yaml (favorite driver, series, theme)\n- [ ] Caution/lead change alerts via tmux display-message\n- [ ] Desktop notifications: osascript (macOS) and notify-send (Linux)\n- [ ] Support for multiple favorite drivers with distinct highlighting\n- [ ] TPM (tmux plugin manager) integration with install script","status":"open","priority":2,"issue_type":"task","owner":"jim.myers@jfmyers.dev","created_at":"2026-02-15T19:14:39Z","created_by":"Jim Myers","updated_at":"2026-02-15T19:14:39Z","dependencies":[{"issue_id":"tmux-raceday-di0.6","depends_on_id":"tmux-raceday-di0","type":"parent-child","created_at":"2026-02-15T11:14:38Z","created_by":"Jim Myers","metadata":"{}"},{"issue_id":"tmux-raceday-di0.6","depends_on_id":"tmux-raceday-di0.4","type":"blocks","created_at":"2026-02-15T11:14:54Z","created_by":"Jim Myers","metadata":"{}"},{"issue_id":"tmux-raceday-di0.6","depends_on_id":"tmux-raceday-di0.5","type":"blocks","created_at":"2026-02-15T11:14:53Z","created_by":"Jim Myers","metadata":"{}"}]}
{"id":"tmux-raceday-di0.7","title":"Phase 7: Standings + Historical Data","description":"## Acceptance Criteria\n- [ ] Driver standings view: points, wins, stage wins, playoff status\n- [ ] Loop stats integration for post-race analysis\n- [ ] Multi-series toggle (Cup/Xfinity/Trucks) with config default\n- [ ] README with usage docs and demo GIF\n- [ ] Release automation (goreleaser or similar)","status":"open","priority":2,"issue_type":"task","owner":"jim.myers@jfmyers.dev","created_at":"2026-02-15T19:14:39Z","created_by":"Jim Myers","updated_at":"2026-02-15T19:14:39Z","dependencies":[{"issue_id":"tmux-raceday-di0.7","depends_on_id":"tmux-raceday-di0","type":"parent-child","created_at":"2026-02-15T11:14:39Z","created_by":"Jim Myers","metadata":"{}"},{"issue_id":"tmux-raceday-di0.7","depends_on_id":"tmux-raceday-di0.6","type":"blocks","created_at":"2026-02-15T11:14:54Z","created_by":"Jim Myers","metadata":"{}"}]}
{"id":"tmux-raceday-dz3","title":"Explore: NASCAR Racing TUI / tmux Integration","description":"## Acceptance Criteria\n- Findings stored in bead design field (not filesystem)\n- Structured as Current State, Recommendation, and phased Next Steps\n- Each phase is independently actionable\n- Covers: data sources/APIs, TUI framework, tmux integration, schedule display, live leaderboard, favorite driver config, and additional feature ideas","design":"# NASCAR Racing TUI / tmux Integration\n\n## Current State\n\nRepo is empty ‚Äî git init'd with .beads, .gitattributes, AGENTS.md. No code yet.\n\n## Data Sources\n\n### Recommended: NASCAR CDN Feeds (cf.nascar.com)\n\nFree, unauthenticated JSON feeds powering NASCAR.com itself.\nDocumented by community at ooohfascinating/NascarApi.\n\n**Live feeds** (~1s updates during sessions):\n- `cf.nascar.com/live/feeds/live-feed.json` ‚Äî full leaderboard\n- `cf.nascar.com/live/feeds/live-flag-data.json` ‚Äî flag state\n- `cf.nascar.com/live/feeds/live-pit-data.json` ‚Äî pit stops\n- `cf.nascar.com/live/feeds/live-points.json` ‚Äî live points\n- `cf.nascar.com/live/feeds/live-stage-points.json`\n\n**Static feeds:**\n- `cf.nascar.com/cacher/{year}/race_list_basic.json` ‚Äî schedule\n- `cf.nascar.com/cacher/drivers.json` ‚Äî driver list\n- `cf.nascar.com/cacher/tracks.json` ‚Äî track info\n- Weekend feed, lap times, loop stats per race\n\nSeries IDs: 1=Cup, 2=Xfinity, 3=Trucks\n\nLive-feed.json per vehicle: running_position, delta, laps_completed,\nlaps_led, last_lap_speed, pit_stops, passes_made, status, is_on_dvp,\nstage info. Top-level: lap_number, laps_to_go, flag_state, run_type\n(1=Practice, 2=Qualifying, 3=Race).\n\n**Advantages:** Free, no API key, authoritative, rich data, stable format.\n**Risk:** Unofficial ‚Äî poll reasonably (5-10s live, 1hr schedule).\n\n## Tech Stack Recommendation\n\n| Decision | Choice | Rationale |\n|----------|--------|-----------|\n| Language | Go | Single binary, fast startup, stdlib HTTP |\n| TUI | Bubbletea + Lip Gloss | Elm arch, tables/spinners, tmux-friendly |\n| tmux | `#(raceday --status)` + `display-popup` | Same pattern as gitmux |\n| Config | YAML | Standard for Go CLI tools |\n\n### tmux Integration Modes\n\n1. **Status bar:** `set -g status-right '#(raceday --status)'`\n   Short string: üèÅ Daytona 500 | Lap 142/200 | P1 #9 Elliott | #24 Byron P6\n2. **Full TUI:** `bind r display-popup -E -w 80% -h 80% \"raceday\"`\n3. **Notifications:** `tmux display-message` for cautions/lead changes\n\n## Additional Feature Ideas\n\n- Driver standings/points (live-points.json) ‚Äî Low effort\n- Pit stop tracking (live-pit-data.json) ‚Äî Medium\n- Stage results ‚Äî Low\n- Flag/caution notifications ‚Äî Medium\n- Lead change alerts (diff position between polls) ‚Äî Medium\n- Qualifying/practice results ‚Äî Low\n- Movers/shakers (passing_differential) ‚Äî Low\n- Damaged vehicle policy alerts (is_on_dvp) ‚Äî Low\n- Gap chart/position graph ‚Äî High\n- Desktop notifications (osascript/notify-send) ‚Äî Medium\n- Multi-series support ‚Äî Low (data already supports it)\n\n## Next Steps\n\n**Phase 1: Data Layer + Status Bar MVP**\n1. Init Go module (cmd/raceday/, internal/nascar/, internal/tmux/)\n2. NASCAR API client: fetch race_list_basic.json, parse schedule\n3. --status flag outputs one-line: next race name, date, time\n4. File-based caching (1hr for schedule)\n5. Test with tmux status-right\n6. --driver flag for favorite driver number\n\n**Phase 2: Live Race Detection + Status Bar**\n1. Poll live-feed.json, check run_type==3 + series_id==1\n2. Switch status to: lap count, leader, favorite driver position\n3. Smart polling: 10s race, 5min practice, 1hr idle\n4. Flag state display (colored symbols)\n5. Handle edge cases: rain delay, not started, completed\n\n**Phase 3: Full TUI Leaderboard**\n1. Bubbletea app (model/update/view)\n2. Full table: position, car#, driver, delta, laps led, speed, status\n3. Highlight favorite driver row\n4. Keyboard: q=quit, j/k=scroll, /=search, tab=sort\n5. Auto-refresh tick (5s during race)\n6. Wire tmux popup binding\n\n**Phase 4: Race Weekend Context**\n1. Weekend feed integration\n2. Schedule view with countdowns\n3. Entry list (drivers, teams, manufacturers)\n4. Qualifying results / starting grid\n5. Practice session support\n6. View switching: 1=leaderboard, 2=schedule, 3=entry, 4=standings\n\n**Phase 5: Pit Stops + Stage Tracking**\n1. Pit data integration (tire choice, pit time, laps since pit)\n2. Stage results overlay\n3. Caution tracking (count, reason, laps under caution)\n4. Movers/shakers via passing_differential\n\n**Phase 6: Notifications + Configuration**\n1. YAML config (~/.config/raceday/config.yaml)\n2. tmux display-message alerts for cautions/lead changes\n3. Desktop notifications (macOS/Linux)\n4. Multiple favorite drivers\n5. TPM integration + Homebrew formula\n\n**Phase 7: Standings + Historical**\n1. Driver standings (points, wins, playoff status)\n2. Loop stats for post-race analysis\n3. Multi-series toggle\n4. README, demo GIF, releases","status":"closed","priority":2,"issue_type":"task","owner":"jim.myers@jfmyers.dev","created_at":"2026-02-15T18:55:44Z","created_by":"Jim Myers","updated_at":"2026-02-15T19:15:07Z","closed_at":"2026-02-15T19:15:07Z","close_reason":"Converted to epic tmux-raceday-di0"}
{"id":"tmux-raceday-l2w","title":"Explore: Docker container pattern for claude-code dev","description":"## Acceptance Criteria\n- Findings stored in bead design field (not filesystem)\n- Structured as Current State, Recommendation, and phased Next Steps\n- Each phase is independently actionable","design":"# Running Claude Code in Docker: Dev Container Pattern\n\n## Current State\n\n### Official Support\n- Anthropic provides a **reference devcontainer** in\n  `claude-code/.devcontainer/` (Dockerfile, devcontainer.json,\n  init-firewall.sh)\n- Docker Inc offers **Docker Sandbox**: `docker sandbox run claude\n  ~/my-project` (Ubuntu-based, zero-config)\n- No official standalone Docker image on Docker Hub/GHCR\n\n### System Requirements\n- OS: Ubuntu 20.04+, Debian 10+, Alpine 3.19+\n- RAM: 4 GB+\n- Shell: Bash or Zsh\n- Node.js: **NOT required** with native installer (only for\n  deprecated npm method)\n- ripgrep: bundled with native install\n\n### Installation\nNPM install deprecated since v2.1.15. Use native installer:\n```bash\ncurl -fsSL https://claude.ai/install.sh | bash\n```\nSelf-contained binary at `~/.local/bin/claude`, no Node.js dep.\n\n### Community Projects\n- **ClaudeBox**: per-project Debian containers, UID/GID matching,\n  15+ language profiles, per-project firewall allowlists\n- **Trail of Bits devcontainer**: Ubuntu 24.04, security-audit\n  focused, filesystem isolation\n- **claude-container**: persistent credentials, workspace access\n- **Docker Sandbox**: Docker Desktop built-in, zero-config\n\n## Recommendation\n\n### Base Image\n`debian:bookworm-slim` with native installer (no Node.js needed).\nUse `node:22-bookworm-slim` if your project needs Node.js.\n\n### Project Mount\nBind mount with delegated consistency (macOS perf):\n```\n-v $(pwd):/workspace:delegated\n```\n\n### API Key\nPass at runtime, never bake into image:\n```bash\ndocker run -e ANTHROPIC_API_KEY=\"$ANTHROPIC_API_KEY\" ...\n```\n\n### Permissions\nMatch container UID/GID to host user:\n```dockerfile\nARG USER_UID=1000\nARG USER_GID=1000\nRUN groupadd -g $USER_GID devuser \u0026\u0026 \\\n    useradd -u $USER_UID -g $USER_GID -m -s /bin/bash devuser\nUSER devuser\n```\nBuild with `--build-arg USER_UID=$(id -u) --build-arg USER_GID=$(id -g)`\n\n### Config Persistence\nNamed volume for `~/.claude`:\n```\n-v claude-config:/home/devuser/.claude\n```\nSeed specific files read-only:\n```\n-v ~/.claude/settings.json:/home/devuser/.claude/settings.json:ro\n```\n\n### Networking\nOfficial firewall: default-deny egress, allowlist for\napi.anthropic.com, GitHub, npm, claude.ai. Requires\n`--cap-add=NET_ADMIN --cap-add=NET_RAW`. Skip firewall for\ntrusted dev containers; essential for `--dangerously-skip-permissions`.\n\n### Git Credentials\n1. Fine-grained GitHub tokens (recommended): `-e GH_TOKEN=...`\n2. SSH agent forwarding (Linux): `-v $SSH_AUTH_SOCK:/ssh-agent`\n3. Git config read-only: `-v ~/.gitconfig:/home/devuser/.gitconfig:ro`\n\n## Next Steps\n\n**Phase 1: Minimal Working Container**\n1. Create Dockerfile with debian:bookworm-slim base\n2. Install claude-code via native installer\n3. Install git, ripgrep, zsh, curl, jq\n4. Create non-root user with configurable UID/GID\n5. Test: docker run -it -e ANTHROPIC_API_KEY -v $(pwd):/workspace\n\n**Phase 2: Persistence and Config**\n6. Add named volumes for ~/.claude and shell history\n7. Bind mount project dir with delegated consistency\n8. Mount .gitconfig read-only for git identity\n9. Test: stop/start, verify auth persists, check file ownership\n\n**Phase 3: Security Hardening**\n10. Port official init-firewall.sh (add claude.ai to allowlist)\n11. Add NET_ADMIN/NET_RAW capabilities\n12. Install iptables, ipset, iproute2, dnsutils\n13. Test: curl example.com fails, curl api.anthropic.com succeeds\n\n**Phase 4: Git Integration**\n14. Choose credential strategy (token vs SSH agent)\n15. Configure gh CLI auth inside container\n16. Test: clone, commit, push from container\n17. Verify file ownership on host\n\n**Phase 5: Developer Experience**\n18. Add docker-compose.yml for one-command startup\n19. Add project-specific tooling (language runtimes, etc.)\n20. Optionally wrap in devcontainer.json for VS Code","status":"closed","priority":2,"issue_type":"task","owner":"jim.myers@jfmyers.dev","created_at":"2026-02-15T18:55:43Z","created_by":"Jim Myers","updated_at":"2026-02-15T19:14:57Z","closed_at":"2026-02-15T19:14:57Z","close_reason":"Converted to epic tmux-raceday-d5l"}
